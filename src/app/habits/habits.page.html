<ion-header>
    <ion-toolbar ion-justify-content-center class="toolbar ion-justify-content-evenly">
        <ion-buttons ion-justify-content-center class="ion-justify-content-evenly">
            <ion-button (click)="mode='list'" [color]=" (mode == 'list' || mode == 'empty') ? 'primary' : 'medium'">
                <ion-icon slot="icon-only" name="list">
                </ion-icon>
            </ion-button>
            <ion-button (click)="mode='search'" [disabled]="mode == 'empty'" [color]="mode == 'search'? 'primary' : 'medium'">
                <ion-icon slot="icon-only" name="search"></ion-icon>
            </ion-button>
            <ion-button [color]="mode == 'edit'? 'primary' : 'medium'" [disabled]="mode == 'empty'">
                <ion-icon slot="icon-only" name="create"></ion-icon>
            </ion-button>
            <ion-button [disabled]="mode == 'empty'" [color]="mode == 'delete'? 'primary' : 'medium'" (click)="toggleDeleteMode()" routerDirection="forward">
                <ion-icon name="remove-circle-outline"></ion-icon>
            </ion-button>
            <ion-button [color]="mode == 'add'? 'primary' : 'medium'" id="add" [routerLink]="['create']" routerDirection="forward">
                <ion-icon name="add-circle-outline"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-toolbar *ngIf="mode == 'delete'" no-padding>
    <div style="display:flex;justify-content:center;padding:0;border:none;">
        <ion-button (click)="mode = 'normal'" style="display:flex;align-items:center;flex-basis:0.5;min-height:44px;background-color:blue;border:none;" class="btn-fill" no-margin full large>
            Cancel
        </ion-button>
        <ion-button (click)="removeSelectedHabits()" style="display:flex;align-items:center;flex-basis:0.5;min-height:44px;background-color:red;" class="btn-fill" no-margin full large>
            Delete
        </ion-button>
    </div>
</ion-toolbar>

<ion-content>
    <ion-header class="subheader" no-border no-margin no-padding>
        <ion-grid color="medium">
            <ion-row style="" color="medium">

                <!-- left button -->
                <ion-col size="4" class="" style="text-align:left">
                    <ion-button color="none" style="height:100%" [disabled]="mode == 'empty'" (click)="decrementDate()" no-border no-padding no-margin style="font-size:20px;">
                        <ion-icon name="arrow-dropleft" color="primary"></ion-icon>
                    </ion-button>
                </ion-col>

                <!-- the date header  -->
                <ion-col size="4" color="primary" style="">
                    <div style="text-align:center">
                        <div style=" position:relative;top:50%">
                            <ion-label color="primary">{{currentDate.format('dddd MMMM Do')}}</ion-label>
                        </div>
                    </div>
                </ion-col>
                <!-- right button -->
                <ion-col size="4" class="" style="text-align:right">
                    <ion-button (click)="incrementDate()" color="none" no-padding no-margin style="font-size:20px;" [disabled]="mode == 'empty'">
                        <ion-icon name="arrow-dropright" color="primary"></ion-icon>
                    </ion-button>
                </ion-col>
            </ion-row>
        </ion-grid>
        <!-- </ion-item> -->
    </ion-header>
    <ion-list *ngIf="incomplete_tasks.length > 0">
        <ion-item *ngFor="let i of incomplete_tasks">
            <ion-grid>
                <ion-row>
                    <ion-col size="3">
                        <ion-label class="item-text-center" floating>
                            {{i._hour}}
                        </ion-label>
                    </ion-col>
                    <ion-col size="5" class="">
                        <ion-label class="item-text-center" floating>
                            {{i.habit.name}}
                        </ion-label>
                    </ion-col>
                    <ion-col size="4" style="align-content:right;align-items:right; text-align:right">
                        <ion-button color="transparent" style="align-content:right;align-items:right" *ngIf=" mode=='list' && i.task.status !='COMPLETE'" (click)=" completeTask(i)">
                            <ion-icon color="dark" style="font-size:30px" name="checkmark-circle-outline"></ion-icon>
                        </ion-button>
                        <ion-checkbox *ngIf="mode == 'delete'" color="danger" (click)="selectHabit($event,i)"></ion-checkbox>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-item>

    </ion-list>

    <ion-list *ngIf="missed_tasks.length > 0">
        <ion-item *ngFor="let i of missed_tasks">
            <ion-grid>
                <ion-row>
                    <ion-col size="3" color="light">
                        <ion-label class="item-text-center" color="warning" floating>
                            {{i._hour}}
                        </ion-label>
                    </ion-col>
                    <ion-col size="5" class="" color="light">
                        <ion-label class="item-text-center" color="warning" floating>
                            {{i.habit.name}}
                        </ion-label>
                    </ion-col>
                    <ion-col size="4" style="align-content:right;align-items:right; text-align:right">
                        <ion-button color="transparent" style="align-content:right;align-items:right" (click)=" completeTask(i)">
                            <ion-icon *ngIf=" mode=='list' && i.task.status !='COMPLETE'" color="warning" style="font-size:30px" name="checkmark-circle-outline"></ion-icon>
                        </ion-button>
                        <ion-checkbox *ngIf="mode == 'delete'" color="danger" (click)="selectHabit($event,i)"></ion-checkbox>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-item>

    </ion-list>

    <ion-list *ngIf="complete_tasks.length > 0">
        <ion-item *ngFor="let i of complete_tasks">
            <ion-grid>
                <ion-row>
                    <ion-col size="3" color="light">
                        <ion-label class="item-text-center" color="medium" floating>
                            {{i._hour}}
                        </ion-label>
                    </ion-col>
                    <ion-col size="5" class="" color="light">
                        <ion-label class="item-text-center" color="medium" floating>
                            {{i.habit.name}}
                        </ion-label>
                    </ion-col>
                    <ion-col size="4" style="align-content:right;align-items:right; text-align:right">
                        <ion-button color="transparent" style="align-content:right;align-items:right" (click)=" completeTask(i)">
                            <ion-icon *ngIf="mode=='list' && i.task.status !='COMPLETE'" color="dark" style="font-size:30px" name="checkmark-circle-outline"></ion-icon>
                        </ion-button>
                        <ion-checkbox *ngIf="mode == 'delete'" color="danger" (click)="selectHabit($event,i)"></ion-checkbox>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-item>

    </ion-list>

</ion-content>
