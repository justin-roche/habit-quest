<ion-header>
    <ion-toolbar>
        <div float-left>
            <ion-buttons>
                <ion-back-button></ion-back-button>
            </ion-buttons>
        </div>
        <div float-right>
            <ion-buttons>
                <ion-button id="done" [disabled]="form.invalid" slot="end" (click)="trySave()" routerDirection="forward">
                    Done
                </ion-button>
            </ion-buttons>
        </div>

    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-list id="form-list">

        <ion-list-header>
            <ion-label>Info</ion-label>
        </ion-list-header>
        <ion-item>
            <ion-label>
                Name
            </ion-label>
            <ion-input id="name" placeholder="enter name" slot="end" style="text-align:right" [formControl]="form.controls.name"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>
                Description
            </ion-label>
            <ion-input style="text-align:right" [formControl]="form.controls.description" placeholder="enter description"></ion-input>
        </ion-item>


        <ion-list-header>
            <ion-label>Duration</ion-label>
        </ion-list-header>
        <ion-item>
            <ion-label>Hours</ion-label>
            <ion-select [formControl]="form.controls.duration_hours" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.duration_hours" [value]="item.value">{{item.display}}</ion-select-option>

            </ion-select>
        </ion-item>

        <ion-item>
            <ion-label>Minutes</ion-label>
            <ion-select [formControl]="form.controls.duration_minutes" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.duration_minutes" [value]="item.value">{{item.display}}</ion-select-option>

            </ion-select>
        </ion-item>

        <ion-list-header>
            <ion-label>Scheduling</ion-label>
        </ion-list-header>

        <ion-item [attr.lines]="form.controls['start_date'].value? 'none':''">
            <ion-label>
                Start On
            </ion-label>
            <ion-select float-right [formControl]="form.controls.start_type" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.start_types" [value]="item.value">{{item.display}}</ion-select-option>
            </ion-select>
        </ion-item>

        <ion-item *ngIf="form.controls['start_date'].value">
            <ion-text slot="end">{{form.controls.start_date.value | date: 'dd/MM/yyyy'}}</ion-text>
        </ion-item>

        <ion-item lines="none">
            <ion-label>Repeat</ion-label>
            <ion-select style="" [formControl]="form.controls.frequency_units" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.frequency_units" [value]="item.value">{{item.display}}</ion-select-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <div style="display:flex;justify-content:flex-end;align-content:center;align-items:center" slot="end">


                <ion-label></ion-label>
                every
                <ion-input [formControl]="form.controls.frequency" style="border:1px solid green;flex:.5;margin-left: 8px;margin-right: 8px">


                </ion-input>
                {{controlValue('frequency_units') + 's'}}
            </div>
        </ion-item>
        <ion-item>
            <ion-button (click)="presentDaySchedule()" *ngIf="form.controls.frequency_units.value == 'day'" slot="end">select time</ion-button>
            <ion-button (click)="presentWeekSchedule()" *ngIf="form.controls.frequency_units.value == 'week'" slot="end">select times</ion-button>
        </ion-item>

        <ion-item lines="none">
            <ion-label>
                End After
            </ion-label>
            <ion-text *ngIf="form.controls.end_type.value == 'date'" slot="end">{{form.controls.end_date.value | date: 'dd/MM/yyyy'}}</ion-text>
            <ion-input *ngIf="form.controls.end_type.value != 'date'" style="border:1px solid gray" style="text-align:right" type="number" [formControl]="form.controls.end_quantity"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label></ion-label>

            <ion-select [formControl]="form.controls.end_type" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.end_types" [value]="item.value">{{item.display}}</ion-select-option>
            </ion-select>

        </ion-item>

        <ion-list-header>
            <ion-label>Category</ion-label>
        </ion-list-header>

        <ion-item>
            <ion-label>Abstinence type</ion-label>
            <ion-checkbox [formControl]="form.controls.abstinence"></ion-checkbox>
        </ion-item>

        <ion-item>
            <ion-label>Group</ion-label>
            <ion-select [formControl]="form.controls.group" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.groups" [value]="item.value">{{item.display}}</ion-select-option>
            </ion-select>
        </ion-item>

        <ion-item>
            <ion-label>Difficulty</ion-label>
            <ion-select [formControl]="form.controls.difficulty" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.difficulties" [value]="item.value">{{item.display}}</ion-select-option>

            </ion-select>
        </ion-item>

        <ion-item>
            <ion-label>Priority</ion-label>
            <ion-select [formControl]="form.controls.priority" [interfaceOptions]="customPopoverOptions" interface="popover" placeholder="Select One">
                <ion-select-option *ngFor="let item of formOptions.priorities" [value]="item.value">{{item.display}}</ion-select-option>
            </ion-select>
        </ion-item>

    </ion-list>




</ion-content>

<!-- Input with value -->
<!-- <ion-input value="custom"></ion-input> -->

<!-- Input with placeholder -->
<!-- <ion-input placeholder="Enter Input"></ion-input> -->

<!-- Input with clear button when there is a value -->
